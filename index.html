<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Open Card Pack</title>

<style>
/* ---------- RESET ---------- */
* {
  margin:0;
  padding:0;
  box-sizing:border-box;
}

/* ---------- BACKGROUND ---------- */
body {
  width:100vw;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("bg.jpg") center/cover no-repeat fixed; /* üî• ‡∏£‡∏π‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
  overflow:hidden;
}

/* ---------- SNOW CANVAS ---------- */
canvas {
  position:fixed;
  inset:0;
  pointer-events:none; /* ‡πÑ‡∏°‡πà‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å */
  z-index:1;
}

/* ---------- PACK ---------- */
.pack {
  width:260px;
  height:360px;
  position:relative;
  cursor:pointer;
  perspective:1000px;
  z-index:2;
}

/* ‡∏´‡∏ô‡πâ‡∏≤‡∏ã‡∏≠‡∏á */
.pack-front {
  width:100%;
  height:100%;
  background:url("pack.png") center/cover no-repeat;
  border-radius:18px;
  position:absolute;
  z-index:3;
  transition:.8s ease;
  overflow:hidden;
}

/* ‡∏ï‡∏≠‡∏ô‡∏â‡∏µ‡∏Å */
.pack.open .pack-front {
  clip-path:polygon(
    0 0,48% 0,50% 6%,52% 0,100% 0,
    100% 100%,52% 100%,50% 94%,48% 100%,0 100%
  );
  transform:scaleX(1.05);
  opacity:0;
  pointer-events:none;
}

/* ---------- CARD ---------- */
.card {
  width:240px;
  height:340px;
  position:absolute;
  top:10px;
  left:10px;
  perspective:1000px;
  opacity:0;
  transform:translateY(40px);
  transition:.8s;
  z-index:1;
}

.pack.open .card {
  opacity:1;
  transform:translateY(0);
}

.card-inner {
  width:100%;
  height:100%;
  transform-style:preserve-3d;
  transition:.8s;
  transform:rotateY(180deg);
}

.card.flip .card-inner {
  transform:rotateY(0deg);
}

.card-front,
.card-back {
  position:absolute;
  width:100%;
  height:100%;
  backface-visibility:hidden;
  border-radius:14px;
}

.card-front img,
.card-back img {
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:14px;
}

.card-front {
  transform:rotateY(180deg);
}
</style>
</head>

<body>

<canvas id="snow"></canvas>

<div class="pack" id="pack">
  <div class="pack-front"></div>

  <div class="card" id="card">
    <div class="card-inner">
      <div class="card-front">
        <img src="front.jpg">
      </div>
      <div class="card-back">
        <img src="back.jpg">
      </div>
    </div>
  </div>
</div>

<audio id="tearSound" src="tear.mp3" preload="auto"></audio>

<script>
/* ---------- PACK ---------- */
const pack = document.getElementById("pack");
const card = document.getElementById("card");
const sound = document.getElementById("tearSound");

let opened = false;

pack.addEventListener("click", () => {
  if(opened) return;
  opened = true;
  sound.play();
  pack.classList.add("open");
});

card.addEventListener("click", (e) => {
  e.stopPropagation();
  card.classList.toggle("flip");
});

/* ---------- SNOW EFFECT ---------- */
const canvas = document.getElementById("snow");
const ctx = canvas.getContext("2d");

let w, h;
function resize(){
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

const snowflakes = [];
const COUNT = 160;

for(let i=0;i<COUNT;i++){
  snowflakes.push({
    x: Math.random()*w,
    y: Math.random()*h,
    r: Math.random()*3+1,
    s: Math.random()*1+0.5
  });
}

function draw(){
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle="rgba(255,255,255,.9)";
  ctx.beginPath();
  snowflakes.forEach(f=>{
    ctx.moveTo(f.x,f.y);
    ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    f.y += f.s;
    if(f.y>h){
      f.y = -10;
      f.x = Math.random()*w;
    }
  });
  ctx.fill();
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
